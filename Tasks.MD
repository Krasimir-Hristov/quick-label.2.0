Разбира се! Ето го обновения и много по-конкретен `TASK.md` файл. Той взима предвид цялата нова информация от скрийншотите, като запазва структурата и добавя `[ ]` преди всяка задача, за да можеш лесно да следиш напредъка си.

Можеш да копираш цялото съдържание отдолу директно в твоя `TASK.md` файл в проекта.

---

# TASK.md: План на проекта - Генератор на етикети
*(Версия 2.0 - съобразена с конкретния дизайн)*

Този документ описва задачите за разработка на уеб приложение за генериране на етикети от Excel файл, базирано на предоставен дизайн.

## Фаза 1: Основи и обработка на данни

*Цел: Да се изгради основата за четене на Excel файла и да се обработят **точните колони** (`Artikelbezeichnung` и `Verkaufspreis Kölle-Zoo`) в правилния формат.*

*   [X] **Промпт 1.1: Почистване на началната страница**
    *   [X] Почисти `app/page.tsx`, като оставиш само `main` елемент със заглавие `<h1>Генератор на етикети` и `div` контейнер под него.
    *   [X] Стилизирай контейнера да е центриран на страницата.
*   [X] **Промпт 1.2: Създаване на UI за качване**
    *   [X] Създай компонент `components/FileUpload.tsx`.
    *   [X] В него използвай `Input` (`type="file"`) и `Button` от `shadcn/ui`, за да създадеш визуалната част за качване на файл.
*   [X] **Промпт 1.3: Имплементиране на логиката за четене**
    *   [X] Импортирай `FileUpload.tsx` в `app/page.tsx`, за да се визуализира.
    *   [X] В `FileUpload.tsx` добави логика с библиотеката `xlsx`, която при избор на файл чете съдържанието му.
    *   [X] Изведи прочетените данни в `console.log` или `console.table`, за да потвърдиш, че работят.
*   [X] **Промпт 1.4: Дефиниране на структурата на данните (Interface)**
    *   [X] Създай нов файл `types/index.ts`.
    *   [X] В него дефинирай `interface LabelData` със следните полета: `artikelbezeichnung: string` и `verkaufspreis: number`.
*   [X] **Промпт 1.5: Създаване на функция за парсване на данните**
    *   [X] В `lib/utils.ts`, създай функция `parseExcelData(data: any[]): LabelData[]`.
    *   [X] Функцията трябва да обхожда суровия масив от данни.
    *   [X] За всеки ред, тя трябва да взима стойността от колона `Artikelbezeichnung` и да я записва в `artikelbezeichnung`.
    *   [X] За всеки ред, тя трябва да взима стойността от колона `Verkaufspreis Kölle-Zoo`, да я преобразува в число (като замени `,` с `.`) и да я записва в `verkaufspreis`.

## Фаза 2: Визуализация на етикетите

*Цел: Да се пресъздаде **точният визуален дизайн** на жълтия етикет и да се подредят етикетите в решетка по 4 на ред.*

*   [X] **Промпт 2.1: Създаване на компонент за етикет**
    *   [X] Създай компонент `components/Label.tsx`, който приема `props` от тип `LabelData`.
    *   [X] Пресъздай дизайна на жълтия етикет с Tailwind CSS (жълт фон, черен текст, заоблени ъгли и т.н.).
    *   [X] Добави статичния текст ("APP VORTEIL", "DEIN PREIS MIT DER KÖLLE ZOO APP").
    *   [X] Покажи динамично `artikelbezeichnung` на правилното място.
    *   [X] Покажи динамично `verkaufspreis` с голям, удебелен шрифт, последван от знака "€".
*   [ ] **Промпт 2.2: Създаване на контейнер за преглед на етикети**
    *   [ ] Създай компонент `components/LabelPreview.tsx`, който приема масив от `LabelData`.
    *   [ ] В него използвай `.map()` и рендирай по един `Label` компонент за всеки елемент от масива.
    *   [ ] Използвай CSS Grid (`grid grid-cols-4 gap-4`), за да подредиш етикетите в решетка, **точно по 4 на ред**.
*   [ ] **Промпт 2.3: Свързване на компонентите**
    *   [ ] В `app/page.tsx`, използвай `useState` hook, за да съхраняваш масив от `LabelData`.
    *   [ ] Подай функцията за обновяване на състоянието към `FileUpload` компонента.
    *   [ ] След като файлът е прочетен и парснат, обнови състоянието с получените данни.
    *   [ ] Подай данните от състоянието към `LabelPreview` компонента, за да се визуализират етикетите.

## Фаза 3: Принтиране и PDF

*Цел: Да се добави финалната функционалност за принтиране на генерираните етикети.*

*   [ ] **Промпт 3.1: Интеграция на `react-to-print`**
    *   [ ] В `app/page.tsx`, добави `useRef` към `LabelPreview` контейнера.
    *   [ ] Добави нов бутон "Принтирай етикети".
    *   [ ] Използвай `useReactToPrint` hook, за да задействаш принтирането само на `LabelPreview` компонента при клик на бутона.
*   [ ] **Промпт 3.2: Добавяне на стилове за печат**
    *   [ ] Добави `@media print` стилове.
    *   [ ] В тези стилове, скрий всички ненужни елементи (заглавие, бутони и т.н.).
    *   [ ] Увери се, че решетката с етикетите заема цялата ширина на страницата.
    *   [ ] Премахни всякакви фонове, рамки или сенки от етикетите при печат, за да остане само черният текст на бял фон.

## Фаза 4: Подобрения и финализиране

*Цел: Да се направи приложението по-устойчиво и лесно за ползване.*

*   [ ] **Промпт 4.1: Обработка на грешки**
    *   [ ] В `FileUpload.tsx`, добави валидация за типа на файла (само `.xlsx`, `.xls`).
    *   [ ] Обгради логиката за парсване с `try...catch` блок.
    *   [ ] При грешка, покажи на потребителя съобщение с `Alert` или `Toast` компонент.
*   [ ] **Промпт 4.2: Индикатор за зареждане**
    *   [ ] Докато файлът се обработва, деактивирай бутона "Качи файл".
    *   [ ] Показвай икона за зареждане (spinner), докато трае обработката.
*   [ ] **Промпт 4.3: Изчистване на състоянието**
    *   [ ] Добави бутон "Изчисти".
    *   [ ] При клик, бутонът трябва да нулира състоянието с етикетите (`setLabels([])`), за да се подготви приложението за ново качване.