План за работа: Промпт по промпт
Фаза 1: Основи и четене на файл
Цел: Да накараме приложението да чете Excel файл и да показва данните в конзолата.
Промпт 1.1:
"Почисти началната страница app/page.tsx. Премахни всичко излишно от нея и я остави само с един main елемент, който съдържа заглавие <h1>Генератор на етикети</h1> и един div контейнер под него. Стилизирай контейнера да е центриран на страницата с малко отстояние отгоре."
Промпт 1.2:
"Създай ми кода за нов React компонент в components/FileUpload.tsx. Компонентът трябва да използва Input и Button от shadcn/ui. Той трябва да съдържа поле за избор на файл (<Input type="file">) и бутон 'Качи файл'. Засега не добавяй никаква логика, само визуалната част."
Промпт 1.3:
"Сега добави логика в FileUpload.tsx. Искам при избор на файл, неговото съдържание да се прочете с библиотеката xlsx. След това, преобразувай данните в JSON формат и ги изведи в конзолата на браузъра с console.log. Импортирай и използвай този компонент в app/page.tsx."
Промпт 1.4:
"Създай ми TypeScript interface за данните от етикета. Направи нов файл types/index.ts и в него дефинирай interface LabelData, който съдържа следните полета: productName: string, productCode: string, и price: number."
Промпт 1.5:
"Напиши ми функция-помощник, която ще парсва данните. В lib/utils.ts (ако нямаш такъв файл, създай го), напиши функция parseExcelData(data: any[]): LabelData[]. Тази функция трябва да приема суровия масив от xlsx и да го трансформира в масив от LabelData обекти. Предполагаме, че колоните в Excel са 'Име на продукт', 'Код на продукт' и 'Цена'."
Фаза 2: Визуализация на етикетите
Цел: Да покажем генерираните етикети на екрана.
Промпт 2.1:
"Създай ми кода за компонент components/Label.tsx. Той трябва да приема props от тип LabelData. Вътре в него, използвай Card, CardHeader, CardContent от shadcn/ui, за да визуализираш красиво данните за един етикет."
Промпт 2.2:
"Създай ми кода за компонент components/LabelPreview.tsx. Той трябва да приема props с масив от LabelData (labels: LabelData[]). Вътре в него, използвай .map() за да обходиш масива и да рендираш по един Label компонент за всеки елемент. Подреди етикетите в решетка (grid), която показва по 3 етикета на ред на десктоп."
Промпт 2.3:
"Време е да свържем всичко. Модифицирай app/page.tsx. Използвай useState hook, за да създадеш състояние labels с тип LabelData[]. Подай функцията за обновяване на състоянието към FileUpload компонента, така че след като прочете и парсне файла, да запише данните в това състояние. След това, подай labels състоянието към LabelPreview компонента, за да ги визуализира."
Фаза 3: Принтиране и PDF
Цел: Да добавим финалната функционалност за принтиране.
Промпт 3.1:
"Интегрирай react-to-print в app/page.tsx. Добави useRef към LabelPreview контейнера. Добави нов бутон 'Принтирай етикети' до бутона за качване. При клик върху него, трябва да се задейства функцията за принтиране от useReactToPrint hook-а, която да принтира само съдържанието на LabelPreview."
Промпт 3.2:
"Добави ми CSS стилове специално за печат (@media print) в app/page.tsx или в globals.css. Тези стилове трябва да скрият всичко на страницата, освен контейнера с етикетите (LabelPreview). Също така, премахни рамките и сенките на Card компонентите при печат, за да изглеждат като изчистени етикети на листа."
Фаза 4: Подобрения и финализиране
Цел: Да направим приложението по-надеждно и удобно.
Промпт 4.1:
"Добави ми обработка на грешки в FileUpload.tsx. Първо, провери дали избраният файл е с разширение .xlsx или .xls. Второ, обгради логиката за парсване с try...catch. Ако възникне грешка, изведи я в състояние и я покажи на потребителя чрез Alert компонент от shadcn/ui."
Промпт 4.2:
"Добави индикатор за зареждане. Докато файлът се обработва, бутонът 'Качи файл' трябва да е деактивиран и до него да се показва икона за зареждане (spinner). Можеш да използваш иконата Loader2 от lucide-react."
Промпт 4.3:
"Добави бутон 'Изчисти' в app/page.tsx. Когато се натисне, той трябва да изчисти състоянието с етикетите (setLabels([])), което ще скрие генерираните етикети и ще позволи на потребителя да започне отначало с нов файл."